Starting environment synchronization at Thu May  8 11:43:36 CST 2025
Step 1: Checking .env file...
.env file already exists
Adding API_URL to .env file
Step 2: Installing global dependencies...

changed 42 packages in 6s

7 packages are looking for funding
  run `npm fund` for details
Step 3: Installing local dependencies...

up to date, audited 104 packages in 1s

17 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

up to date, audited 43 packages in 1s

7 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
Step 4: Synchronizing database schema...
./scripts/deployment/sync-environments.sh: command substitution: line 81: syntax error near unexpected token `('
./scripts/deployment/sync-environments.sh: command substitution: line 81: `      SELECT EXISTS ('
Starting database schema synchronization...
Error synchronizing database schema: TypeError: Client was passed a null or undefined query
    at Client.query (/var/www/filmflex/node_modules/pg/lib/client.js:529:13)
    at syncSchema (/var/www/filmflex/sync-schema.js:34:43)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Schema synchronization failed: TypeError: Client was passed a null or undefined query
    at Client.query (/var/www/filmflex/node_modules/pg/lib/client.js:529:13)
    at syncSchema (/var/www/filmflex/sync-schema.js:34:43)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Step 5: Copying improved import scripts...
Step 6: Updating API URL in existing scripts...
Step 7: Fixing permissions...
Environment synchronization completed at Thu May  8 11:43:46 CST 2025

Your development and production environments should now be synchronized.
You can run the original import script with:
  cd /var/www/filmflex/scripts/data && ./import-all-movies-resumable.sh

Or use our improved import script with:
  cd /var/www/filmflex && ./run-improved-import.sh 1 5

For more details, check the log: /var/log/filmflex/sync-environments-20250508114336.log
root@lightnode:~/Film_Flex_Release#
root@lightnode:~/Film_Flex_Release#
root@lightnode:~/Film_Flex_Release#
root@lightnode:~/Film_Flex_Release#
root@lightnode:~/Film_Flex_Release# cd ~/Film_Flex_Release
chmod +x scripts/deployment/sync-environments.sh
sudo ./scripts/deployment/sync-environments.sh

========================================
    FilmFlex Environment Synchronization
========================================

Starting environment synchronization at Thu May  8 13:06:52 CST 2025
Step 1: Checking .env file...
.env file already exists
Step 2: Installing global dependencies...

changed 42 packages in 5s

7 packages are looking for funding
  run `npm fund` for details
Step 3: Installing local dependencies...

up to date, audited 104 packages in 1s

17 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

up to date, audited 43 packages in 1s

7 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
Step 4: Synchronizing database schema...
./scripts/deployment/sync-environments.sh: command substitution: line 81: syntax error near unexpected token `('
./scripts/deployment/sync-environments.sh: command substitution: line 81: `      SELECT EXISTS ('
Starting database schema synchronization...
Error synchronizing database schema: TypeError: Client was passed a null or undefined query
    at Client.query (/var/www/filmflex/node_modules/pg/lib/client.js:529:13)
    at syncSchema (/var/www/filmflex/sync-schema.js:34:43)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Schema synchronization failed: TypeError: Client was passed a null or undefined query
    at Client.query (/var/www/filmflex/node_modules/pg/lib/client.js:529:13)
    at syncSchema (/var/www/filmflex/sync-schema.js:34:43)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Step 5: Copying improved import scripts...
Step 6: Updating API URL in existing scripts...
Step 7: Fixing permissions...
Environment synchronization completed at Thu May  8 13:07:02 CST 2025

Your development and production environments should now be synchronized.
You can run the original import script with:
  cd /var/www/filmflex/scripts/data && ./import-all-movies-resumable.sh

Or use our improved import script with:
  cd /var/www/filmflex && ./run-improved-import.sh 1 5

For more details, check the log: /var/log/filmflex/sync-environments-20250508130652.log
