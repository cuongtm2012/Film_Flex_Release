# PhimGG Optimized Cron Job Configuration
# Copy this to /etc/cron.d/filmflex-imports or add to root crontab

# Environment variables for cron jobs
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
SHELL=/bin/bash

# 1. Regular imports - Weekday mornings and evenings (3 pages each)
0 6,18 * * 1-5 root /root/Film_Flex_Release/scripts/deployment/cron-docker-wrapper.sh regular >/dev/null 2>&1

# 2. Weekend light imports - Saturday and Sunday mornings (2 pages each)
0 10 * * 6,0 root /root/Film_Flex_Release/scripts/deployment/cron-docker-wrapper.sh weekend >/dev/null 2>&1

# 3. Deep scan - Saturday early morning (10 pages with deep scanning)
0 4 * * 6 root /root/Film_Flex_Release/scripts/deployment/cron-docker-wrapper.sh deep >/dev/null 2>&1

# 4. Health check before comprehensive import - First Sunday of month
55 0 1-7 * 0 root /root/Film_Flex_Release/scripts/maintenance/health-check.sh >/dev/null 2>&1

# 5. Comprehensive import - First Sunday of month at 1 AM (only if health check passes)
0 1 1-7 * 0 root /root/Film_Flex_Release/scripts/maintenance/health-check.sh && /root/Film_Flex_Release/scripts/deployment/cron-docker-wrapper.sh comprehensive >/dev/null 2>&1

# 6. Daily log cleanup - Every night at midnight
0 0 * * * root find /var/log/filmflex -name "*.log" -type f -mtime +30 -delete >/dev/null 2>&1

# 7. Weekly log rotation - Sunday nights
0 23 * * 0 root /root/Film_Flex_Release/scripts/maintenance/rotate-logs.sh >/dev/null 2>&1

# 8. Database statistics logging - Daily at 2 AM
0 2 * * * root /root/Film_Flex_Release/scripts/maintenance/log-db-stats.sh >/dev/null 2>&1

# 9. Container health check - Every 6 hours
0 */6 * * * root /root/Film_Flex_Release/scripts/maintenance/health-check.sh >/dev/null 2>&1

# 10. Emergency fallback - Retry failed imports every 4 hours during business days
0 8,12,16,20 * * 1-5 root /root/Film_Flex_Release/scripts/deployment/retry-failed-imports.sh >/dev/null 2>&1